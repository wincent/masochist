<!DOCTYPE html>
<html lang='en-US'>
<head>
<meta content='text/html;charset=UTF-8' http-equiv='Content-Type'>
<title>
WinSwitch leopard compatible?

&middot; wincent.com
</title>
<link href='/assets/application-dfd4c4823a8b2979d87ab2ce01a9114c.css' media='screen' rel='stylesheet' type='text/css'>
</head>
<body>
<nav class='global'>
<h1>
<a href='/'>Wincent</a>
</h1>
</nav>
<div id='content-wrapper'>
<div id='content'>
<div id="breadcrumbs"><a href="/">Home</a> &raquo; <a href="/forums">Forums</a> &raquo; <a href="/forums/winswitch">WinSwitch</a> &raquo; WinSwitch leopard compatible?</div>
<h1 class='major'>WinSwitch leopard compatible?</h1>
<div class='topic' id='topic_339'>
<ol class='boxed' id='comments'>
<li class='comment'>
<cite>
<a href="/users/peter-andersen">Peter Andersen</a>
<span class='when'>
<a href="/forums/winswitch/topics/339"><time data-relative="true">2007-11-27T18:31:14Z</time></a>
</span>
</cite>
<blockquote><p>Am I correct that installing (activating) winswitch fails on Leopard? Does to me... Any updates planned?</p>
</blockquote>
</li>
<li class='comment admin' id='comment_998'>
<cite>
<a href="/users/greg-hurrell">Greg Hurrell</a>
<span class='when'><a href="#comment_998"><time data-relative="true">2007-11-28T02:51:07Z</time></a></span>
</cite>
<blockquote><p>I haven't tried it myself yet but I've had several people report that it doesn't work.</p>
<p>It is open source so if people are interested in updating it for Leopard compatibility then that's an option. I myself won't be able to get to it for a while yet due to other stuff that is more urgent.</p>
</blockquote>
</li>
<li class='comment' id='comment_999'>
<cite>
<a href="/users/ahsoul">AhSoul</a>
<span class='when'><a href="#comment_999"><time data-relative="true">2008-01-13T19:17:59Z</time></a></span>
</cite>
<blockquote><p>I had WinSwitch installed before my Leopard upgrade and luckily mine is still working.</p>
<p>The only problem I've got is that I can't jump straight to another user - I have to go to the Login Window first. Bit of a pain but made up for by being able to still run things when I switch in and out.</p>
<p>Would be nice if someone could bring it right up to date though </p>
</blockquote>
</li>
<li class='comment' id='comment_1000'>
<cite>
<a href="/users/rjohn94">RJohn94</a>
<span class='when'><a href="#comment_1000"><time data-relative="true">2008-02-01T16:08:50Z</time></a></span>
</cite>
<blockquote><p>Hmmm... Just made a donation because I've been using and liked WinSwitch for quite a while. It was working fine when transferred to a new Leopard machine, till I lost the user list in the menu and  NOW I find that it's not compatible with Leopard. Looking forward to having such a useful and essential utility upgraded to Leopard--soon, please?</p>
</blockquote>
</li>
<li class='comment admin' id='comment_1001'>
<cite>
<a href="/users/greg-hurrell">Greg Hurrell</a>
<span class='when'><a href="#comment_1001"><time data-relative="true">2008-02-02T07:32:08Z</time></a></span>
</cite>
<blockquote><p>I haven't explored this fully yet but I believe the breakage is most likely due to an incompatibility between &quot;MenuCracker&quot; and Leopard:</p>
<p><a href="http://sourceforge.net/projects/menucracker" class="external">http://sourceforge.net/projects/menucracker</a></p>
<p>MenuCracker is what loads WinSwitch into the menu bar; the hack is necessary because Apple explicitly tries to stop third-party menu extras from loading and has done so since Mac OS X 10.2, I believe.</p>
<p>The trouble is that MenuCracker hasn't been updated since 2003; although fortunately it worked with Jaguar, Panther and Tiger, it looks like it might not work with Leopard.</p>
<p>So I need to find an alternative method which does work on Leopard. At this stage that's just speculation though because I haven't been able to confirm that MenuCracker is the source of the failur; it may be that the incompatibility stems from somewhere else.</p>
</blockquote>
</li>
<li class='comment admin' id='comment_1002'>
<cite>
<a href="/users/greg-hurrell">Greg Hurrell</a>
<span class='when'><a href="#comment_1002"><time data-relative="true">2008-02-27T10:03:54Z</time></a></span>
</cite>
<blockquote><p>This issue is being tracked here:</p>
<p><a href="http://wincent.com/a/support/bugs/show_bug.cgi?id=599" class="external">http://wincent.com/a/support/bugs/show_bug.cgi?id=599</a></p>
</blockquote>
</li>
<li class='comment' id='comment_3466'>
<cite>
anonymous
<span class='when'><a href="#comment_3466"><time data-relative="true">2008-07-06T14:39:41Z</time></a></span>
</cite>
<blockquote><p>WinSwitch on Leopard  <a href="http://www.iusemac.com/forum/viewforum.php?f=20" class="external">http://www.iusemac.com/forum/viewforum.php?f=20</a></p>
</blockquote>
</li>
<li class='comment' id='comment_3467'>
<cite>
<a href="/users/augustas">Augustas</a>
<span class='when'><a href="#comment_3467"><time data-relative="true">2008-07-06T14:43:47Z</time></a></span>
</cite>
<blockquote><p>WinSwitch on Leopard  <a href="http://www.iusemac.com/forum/viewtopic.php?t=109" class="external">http://www.iusemac.com/forum/viewtopic.php?t=109</a></p>
</blockquote>
</li>
<li class='comment admin' id='comment_3468'>
<cite>
<a href="/users/greg-hurrell">Greg Hurrell</a>
<span class='when'><a href="#comment_3468"><time data-relative="true">2008-07-06T17:51:13Z</time></a></span>
</cite>
<blockquote><p>For those who can't be bothered clicking on the link above, the post briefly describes how to manually install WinSwitch on Leopard.</p>
<blockquote>
<p>Installing,   Go to Macintosh HD &gt; Library &gt; Menu Extras &gt; WinSwitch.menu open with SistemUIServer.app </p>
<p>WinSwitch in you menu bar. </p>
<p>Finish</p>
</blockquote>
</blockquote>
</li>
<li class='comment' id='comment_3666'>
<cite>
anonymous
<span class='when'><a href="#comment_3666"><time data-relative="true">2008-08-10T16:03:00Z</time></a></span>
</cite>
<blockquote><p>fwiw, i think there are other incompatibility problems with leopard.</p>
<p>1] i made use of the comments above regarding installing manually.  having had problems with &quot;Activate WinSwitch&quot;, i had previously &quot;uninstalled&quot; prior to re-installing and getting the MenuCracker failures.  but i believe it is the case that you must still execute &quot;Activate WinsSwitch&quot; per user prior to performing the manual install for each user.  because without doing so, WinSwitch did not appear in the menubar.</p>
<p>2] even after performing the manual install, WinSwitch does not appear to show the list of users for me.</p>
<p>3] even after performing the manual install, WinSwitch does not use my customized user icons.  (leopard allows you to take a user photo snapshot, which i have for one user, or import another picture from elsewhere, which i have for another user; the picture shown in winswitch appears to be neither)</p>
<p>4] when i get the system preferences via &quot;Open Accounts...&quot;, the original system fast-user switching menu re-appears, together with a semi-transparent black area that i believe is meant to be the WinSwitch user warning that the system fast-user switching has been re-installed.  however, the black area contains no text and cannot be made to go away until either the WinSwitch menu or the fast-user switching menu has been Cmd-dragged out of the menubar.</p>
<p>i am really torn about which of these items to use.  WinSwitch has the keyboard shortcut allowing me to get to the login window, which is handy and allows me to switch users without keyboard, but it no longer has the list of users which allows me to bypass the login window if i want to switch straight.  and since the icons no longer differentiate, that advantage is lost as well.</p>
<p>i'm hoping the 4 problems listed above are addressed soon.  i would be glad to test any changes on my machine, as i use fast-user switching to switch between home &amp; work accounts constantly.</p>
</blockquote>
</li>
<li class='comment' id='comment_3752'>
<cite>
anonymous
<span class='when'><a href="#comment_3752"><time data-relative="true">2008-09-08T16:37:24Z</time></a></span>
</cite>
<blockquote><p>I'm also experiencing all four of the problems described above.</p>
</blockquote>
</li>
<li class='comment' id='comment_4032'>
<cite>
anonymous
<span class='when'><a href="#comment_4032"><time data-relative="true">2009-01-02T12:31:40Z</time></a></span>
</cite>
<blockquote><p>I had it installed before upgrading to Leopard. I hadn't had any problems until my first reboot of the new year, which gives me this problem (submitted as <a href="/issues/1185">bug #1185</a>). MenuCracker 1.4 in WinSwitch 3.2.1 went crazy, locked SystemUIServer...</p>
<p>Thousands of system log entries like this, maybe 5-10 per second:</p>
<p>09-01-02 11:12:13 SystemUIServer[471] MenuCracker(ISM): Blocked load of default MenuCracker 2.x bundle.</p>
<p>I only found two menu extras using MenuCracker: iStatmenus and WinSwitch. Uninstalled iStatMenus first, no good. Uninstalled WinSwitch (actually, moved it to '/Library/Menu Extras (disabled)') and the problem is solved.</p>
<p>WinSwitch is version 3.2.1 according to the Info.plist file. MenuCracker is version 1.4 according to ITS Info.plist file.</p>
</blockquote>
</li>
<li class='comment' id='comment_4398'>
<cite>
anonymous
<span class='when'><a href="#comment_4398"><time data-relative="true">2009-04-02T07:11:53Z</time></a></span>
</cite>
<blockquote><p>I may be missing something, but why does WinSwitch have to load into SystemUIServer's context at all (which is the only reason to use MenuCracker)? yes, granted, having WinSwitch be draggable to the spot the user would expect the fast user switching menu is great, but Apple has reserved NSMenuExtra for a reason (SystemUIServer is a core OS component whose stability is not be jeopardised by third parties). Why not simply create a NSSatusItem and live with the fact it will appear further left on the menu bar? Such a status bar item would not need to rely on potentially disruptive hacks, and would survive OS updates far more easily. I for one would actually prefer that, never mind menu placement?</p>
<p>Martin (who didn't feel like signing up to another forum to post).</p>
</blockquote>
</li>
<li class='comment admin' id='comment_4402'>
<cite>
<a href="/users/greg-hurrell">Greg Hurrell</a>
<span class='when'><a href="#comment_4402"><time data-relative="true">2009-04-02T11:44:15Z</time></a></span>
</cite>
<blockquote><p>Thanks for the comments, Martin.</p>
<p>The short answer is: that if WinSwitch <em>didn't</em> appear on the right then I would be inundated with user complaints, requests, and questions about the location. It's free software, and the donations have never covered the development or hosting costs, so I can't really afford to take the kind of action which would produce a large support burden.</p>
<p>The longer answer...</p>
<p>I actually happen to agree with most of what you say (the technical points), Martin, and if you look at another product of mine which loads in the menu bar (<a href="/wiki/Synergy">Synergy</a>), you'll see that it uses the public NSStatusItem <a href="/wiki/API">API</a> rather than the private NSMenuExtra one. (And this is despite many requests from users for it to be relocatable in the menu bar.)</p>
<p>But WinSwitch is a replacement for the Fast User Switching menu, and users expect it to appear on the right. I think your point of view is a very rational one, but my experience with user feedback is that you are probably very much alone in preferring an NSStatusItem. I understand why it would be attractive to you (for the stability and the likely compatibility with future OS releases), but I also know that for 99.9% of users those concerns pale in comparison next to the issue of <em>where</em> on the menu bar the menu appears. It's only a cosmetic detail, but it really does matter to a lot of users.</p>
<p>As far as stability goes, WinSwitch itself is extremely simple and unlikely to cause a crash. It's open source so you can <a href="http://git.wincent.com/WinSwitch.git" class="external">check it out yourself</a>. You'll see that it's split into two pieces:</p>
<ul>
<li>a background application which is <em>not</em> loaded into the SystemUIServer and therefore can't cause it to crash; this app handles things like preferences management, hot key control, notifications etc</li>
<li>a tiny menu extra which does nothing but draw the menu; it is only three files and it is fairly easy to audit (I'm not saying it is bug free &mdash; no software is &mdash; but it is not difficult to check over the code and state with a high degree of confidence that it is free of crashing bugs):
<ul>
<li><a href="http://git.wincent.com/WinSwitch.git?a=blob;f=WOWinSwitchMenuExtra.m;h=097893f557cc7d46a489ad2534c57d311b3813bd;hb=add6d9bbc08be06ab6dfef92517f7557f481e221" class="external">WOWinSwitchMenuExtra.m</a></li>
<li><a href="http://git.wincent.com/WinSwitch.git?a=blob;f=WOWinSwitchMenuExtraView.m;h=01dace25c5dfea5f9696cbae8b83f589b4532b21;hb=add6d9bbc08be06ab6dfef92517f7557f481e221" class="external">WOWinSwitchMenuExtraView.m</a></li>
<li><a href="http://git.wincent.com/WinSwitch.git?a=blob;f=NSString%2BWOWinSwitchExtensions.m;h=7999edd5dbf692883f9e34b328d2b7ae0b3f3f5f;hb=add6d9bbc08be06ab6dfef92517f7557f481e221" class="external">NSString+WOWinSwitchExtensions.m</a></li>
</ul>
</li>
</ul>
<p>But I do think the ability to optionally run WinSwitch using NSStatusItem API is a good one. This was previously requested, albeit indirectly, in <a href="/issues/456">ticket #456</a>. But the motivation for the request and the implementation were slightly different, so I'll open a new ticket for this particular issue: <a href="/issues/1266">ticket #1266</a>.</p>
</blockquote>
</li>
<li class='comment' id='comment_4408'>
<cite>
anonymous
<span class='when'><a href="#comment_4408"><time data-relative="true">2009-04-02T16:15:34Z</time></a></span>
</cite>
<blockquote><p>Vincent, thanks for such a fast and in depth reply.</p>
<p>I can see your point, of course, but I still would like to argue mine, which is not only a technical one, but also one by a user frustrated by the fact WinSwitch development seems to have been stalled by MenuCracker not working on Leopard. Also, Insanity have a frankly horrible reputation as to the effect of their hacks on system stability, so I'm not sure I look forward to them providing the replacement for MenuCracker&#x2026;</p>
<p>Both worries would be alleviated greatly if the Leopard compatible version of WinSwitch was anywhere around the corner and it included a NSStatusItem mode (wink, nudge)&#x2026; ah well, I'll wait and see :).</p>
<p>Martin (again, and still not signed up)</p>
</blockquote>
</li>
<li class='comment admin' id='comment_4409'>
<cite>
<a href="/users/greg-hurrell">Greg Hurrell</a>
<span class='when'><a href="#comment_4409"><time data-relative="true">2009-04-03T04:32:02Z</time></a></span>
</cite>
<blockquote><p>I remember playing with some Unsanity &quot;Haxies&quot; in the very, very early days of Mac OS X, probably around the <a href="/wiki/Cheetah">Cheetah</a> (10.0) timeframe, I think. But from very early on (roughly 2001) I've always tried to maintain a &quot;clean&quot; system so that I can do development in an environment that is as close as possible to the one that <a href="/wiki/Apple">Apple</a> ships with new machines. So I can't really comment on Unsanity's stability track record in intervening years... Nevertheless, as their very name suggests, they are and always will be &quot;hacks&quot;. The name of &quot;MenuCracker&quot; also indicates its nature: it exploits a flaw in the <a href="/wiki/API">API</a> to circumvent Apple's attempt at preventing third-party use.</p>
<p>My main concern with Menu Extra Enabler is not that its a &quot;hack&quot; but rather that it is not <a href="/wiki/open_source">open source</a>. At least MenuCracker was open source. As such, I am not really interested in shipping a binary-only installer for a closed-source product alongside WinSwitch. It would be another story if it were open source, but it's not...</p>
<p>So what I am currently thinking of is going down two routes:</p>
<ul>
<li>Offer an NSMenuExtra-based version of WinSwitch, but do not distribute an installer with it. Instead, it would come with instructions which state that it requires Menu Extra Enabler in order to work, and telling people where to download that if they want it. Then to &quot;install&quot; WinSwitch the user would just have to put it wherever they want to keep it and double-click it.</li>
<li>Offer an NSStatusItem-based version as an alternative.</li>
</ul>
<p>This plan isn't entirely satisfactory seeing as the first option is quite complicated and will generate a lot of support requests; the vast majority of users really do prefer simple one-click installs. And the second option is much easier, but that will generate its own support requests from people who don't like where the menu appears in the menu bar.</p>
<p>So in any case, I would like to leave this issue for a while before making a final decision. Usually when I am not sure what course of action to take, I find that taking a step back and reflecting on things usually helps me arrive at the right solution. (Unfortunately only &quot;usually&quot; and not &quot;always&quot;...)</p>
</blockquote>
</li>
<li class='comment' id='comment_4590'>
<cite>
anonymous
<span class='when'><a href="#comment_4590"><time data-relative="true">2009-04-30T11:16:30Z</time></a></span>
</cite>
<blockquote><p>In short, there are two options here:</p>
<p>1) Develop WinSwitch as an NSStatusItem.  Have it work easily with all configurations.  Have it work without resort to undocumented API's.  Have it work in the future.  Save time on the developer.  Have some old-timers complain about the icon being 100 pixels to the left on the menu bar.</p>
<p>2) Try to hack into the system to have it work as an NSMenuExtra.  Have it break every time Apple updates the system.  Have it cause various kinds of unforeseen problems.  Cause extra work for the developer.  Likely never ship it.</p>
<p>I think the choice is easy.  As Steve Jobs once said, real artists ship.  Let WinSwitch do what it does within Apple's constraints.</p>
</blockquote>
</li>
<li class='comment admin' id='comment_4591'>
<cite>
<a href="/users/greg-hurrell">Greg Hurrell</a>
<span class='when'><a href="#comment_4591"><time data-relative="true">2009-04-30T12:15:23Z</time></a></span>
</cite>
<blockquote><p>Let's not forget the third option:</p>
<p>3) Do nothing, and allow people who are interested in taking the project forward take advantage of the fact that WinSwitch is <a href="/wiki/open_source">open source</a> and can do whatever they want with it (your option 1 or 2, or theoretical possible options 4, 5, 6, 7, or anything else). I'm more than happy to accept patches and will incorporate them if they're up to scratch.</p>
<p>This is actually a fairly attractive option considering that:</p>
<ul>
<li>I don't use WinSwitch myself</li>
<li>I haven't really used it since the Panther days</li>
<li>I have no interest in using it seeing as the built-in Fast User-Switching menu already does everything just as I personally would like</li>
<li>there's absolutely no economic incentive to work on it seeing as it is free and the donations never even came close to covering the bandwidth costs</li>
<li>there's no non-economic incentive either because I already have plenty of stimulating development projects on my plate</li>
<li>any less-than-optimal release will only generate support queries</li>
</ul>
<p>I've already said what I think the options are &mdash; either pursue the NSMenuExtra path, or purse the NSStatusItem path &mdash; so your comment doesn't really add anything new (other than the fact that you put what I view as an excessively negative spin on the NSMenuExtra option, given the widespread successful use of the API by third party developers over the years). I could repeat the points that I've already made in this thread, but instead I'll just incorporate them here by reference.</p>
</blockquote>
</li>
<li class='comment' id='comment_7355'>
<cite>
<a href="/users/calion">Calion</a>
<span class='when'><a href="#comment_7355"><time data-relative="true">2011-12-31T23:13:31Z</time></a></span>
</cite>
<blockquote><p>Hmph. All I want is for actual user icons to show up in the as the icon of the Fast User Switching menu, rather than the generic &quot;person&quot; icon (for that matter, I wish I could replace *all* of my menu names with colorful icons...I miss Menuette!). I wish Apple did this (in Leopard; I haven't seen Snow Leopard or Lion). Since Apple doesn't, it would be wonderful if WinSwitch to offer this (for free or as, say, $5 shareware).</p>
</blockquote>
</li>

</ol>
</div>
<h2 class='major'>Reply</h2>
<p>This topic is now closed.</p>
<div class='links'>
<a href="/forums/winswitch">topic index</a>
</div>

</div>
</div>
<footer class='global'>
<ul>
<li>
<a class='mailto' href='mailto:greg@hurrell.net' title='Email me at greg@hurrell.net'>contact</a>
</li>
<li>
<a href='/misc/legal'>legal</a>
</li>
</ul>
</footer>
</body>
</html>
