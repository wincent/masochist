<!DOCTYPE html>
<html lang='en-US'>
<head>
<meta content='text/html;charset=UTF-8' http-equiv='Content-Type'>
<meta content='width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no' name='viewport'>
<title>
Bug #2080: :CommandT Crashs Vim with log &quot;Trace/BPT trap: 5&quot;
&middot; wincent.com
</title>
<link rel="stylesheet" media="screen" href="/assets/application-73fd7b8197d0b27a25f03f916460e23c.css" />

</head>
<body>
<div class='viewport menu-closed'>
<div class='app'>
<a id="top" name="top"></a>
<nav class='global'>
<a class='menu-icon' href='#'>&equiv;</a>
<h1><a href="/">Wincent</a></h1>
<ul class='navbar-links'>
<li>
<a href="/products">Products</a>
</li>
<li><a href="/blog">Blog</a></li>
<li><a href="/wiki">Wiki</a></li>
<li class='selected'><a href="/issues">Issues</a></li>
</ul>
</nav>
<div id='content-wrapper'>
<div id='content'>
<div class='notice'>
<i class='fa fa-info-circle'></i>
You are viewing an historical archive of past issues. Please report new issues to the appropriate project issue tracker on <a href="https://github.com/wincent?tab=repositories">GitHub</a>.
</div>
<div id="breadcrumbs"><a href="/">Home</a> &raquo; <a href="/issues">Issues</a> &raquo; Bug #2080</div>
<div class='issue' id='issue_2080'>
<form class="edit_issue" id="edit_issue_2080" action="/issues/2080" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><input type="hidden" name="_method" value="patch" /><input type="hidden" name="authenticity_token" value="rUeplGtyTn2R0i4ONrzN1PUZCr/4nTSpsNyv0tXjfDiZtRcjzP+UKEheHfkHlZ5gQJtjg/NxurWQw3os8TsbHA==" /><input type="text" name="website_address" id="website_address" value="" class="website-address" /><h1 class='bug major'>
Bug #2080:
<span data-name='issue[summary]'>
:CommandT Crashs Vim with log &quot;Trace/BPT trap: 5&quot;
</span>
</h1>
<table class='issue-metadata'>
<tr>
<th>Kind</th>
<td>
bug
</td>
</tr>
<tr>
<th>Product</th>
<td>
Command-T
</td>
</tr>
<tr>
<th>When</th>
<td>Created <time data-relative="true">2013-04-16T08:12:24Z</time>, updated <time data-relative="true">2014-07-04T10:32:29Z</time></td>
</tr>
<tr>
<th>Status</th>
<td>
closed
</td>
</tr>
<tr>
<th>Reporter</th>
<td>anonymous</td>
</tr>
<tr>
<th>Tags</th>
<td data-name='issue[pending_tags]'>
no tags
</td>
</tr>
</table>
<h4 class='major'>
Description
</h4>
<div class='issue-description-body'>
<p>My environments:</p>
<p>MAC OS 10.8.2</p>
<pre class="shell-syntax">$ ruby -v
ruby 1.9.3p392 (2013-02-22 revision 39386) [x86_64-darwin12.2.0]
$ vim --version
VIM - Vi IMproved 7.3 (2010 Aug 15, compiled Jun 20 2012 13:16:02)</pre>
<p>Reproduce Steps:</p>
<ol>
<li>$vim to open vim</li>
<li>input :CommandT</li>
<li>Crash with log </li>
</ol>
<pre>Vim: Caught deadly signal TRAP
Vim: Finished.
Trace/BPT trap: 5</pre>
<p>Thanks</p>

</div>
</form></div>
<h4 class='major'>Comments</h4>
<ol class='boxed' id='comments'>
<li class='comment admin' id='comment_10197'>
<cite>
<a href="/users/greg-hurrell">Greg Hurrell</a>
<span class='when'><a href="#comment_10197"><time data-relative="true">2013-04-16T15:39:07Z</time></a></span>
</cite>
<blockquote><p>It's probably miscompiled; in order to work, both Vim and Command-T must be linked against the exact same version of Ruby. See other similar tickets in the issue tracker and the forums, where compiling against the right version of Ruby invariably solves the problem.</p>
</blockquote>
</li>
<li class='comment admin' id='comment_10199'>
<cite>
<a href="/users/greg-hurrell">Greg Hurrell</a>
<span class='when'><a href="#comment_10199"><time data-relative="true">2013-04-16T15:49:49Z</time></a></span>
</cite>
<blockquote><p><strong>Product</strong> changed:</p>
<ul>
<li><strong>From:</strong> none</li>
<li><strong>To:</strong> Command-T</li>
</ul>
</blockquote>
</li>
<li class='comment admin' id='comment_10200'>
<cite>
<a href="/users/greg-hurrell">Greg Hurrell</a>
<span class='when'><a href="#comment_10200"><time data-relative="true">2013-04-16T15:50:04Z</time></a></span>
</cite>
<blockquote><p><strong>Status</strong> changed:</p>
<ul>
<li><strong>From:</strong> new</li>
<li><strong>To:</strong> open</li>
</ul>
</blockquote>
</li>
<li class='comment' id='comment_10519'>
<cite>
anonymous
<span class='when'><a href="#comment_10519"><time data-relative="true">2013-09-24T16:05:46Z</time></a></span>
</cite>
<blockquote><p>So I had the same issue.</p>
<p>To be sure I got this right, I did</p>
<pre class="shell-syntax">$ rvm use 1.8.7</pre>
<p>and then removed and re-installed vim via homebrew.</p>
<pre class="shell-syntax">$ otool -L $(which vim) | grep ruby
/Users/[username]/.rvm/rubies/ruby-1.8.7-p374/lib/libruby.dylib (compatibility version 1.8.0, current version 1.8.7)
$ ruby --version
ruby 1.8.7 (2013-06-27 patchlevel 374) [i686-darwin11.4.2]
$ ruby extconf.rb                                                                                                            
checking for ruby.h... yes
creating Makefile
$ make
cc -dynamic -bundle -undefined suppress -flat_namespace -o ext.bundle ext.o match.o matcher.o -L. -L/Users/[username]/.rvm/rubies/ruby-1.8.7-p374/lib -L. -L/usr/local/opt/libyaml/lib -L/usr/local/opt/readline/lib -L/usr/local/opt/libksba/lib -L/usr/local/opt/openssl098/lib    -lruby  -ldl -lobjc
$ vim
Vim: Caught deadly signal TRAP
Vim: Finished.
Trace/BPT trap: 5</pre>
<p>From here everything looked exactly right for me, but I didn't realize that make didn't do anything because the plugin was already compiled. I removed the plugin and let neobundle re-install it for me, after which I tried again. Now it works fine.</p>
<p>Probably a make clean would also have solved the issue.</p>
</blockquote>
</li>
<li class='comment admin' id='comment_10520'>
<cite>
<a href="/users/greg-hurrell">Greg Hurrell</a>
<span class='when'><a href="#comment_10520"><time data-relative="true">2013-09-24T17:40:36Z</time></a></span>
</cite>
<blockquote><p><strong>Status</strong> changed:</p>
<ul>
<li><strong>From:</strong> open</li>
<li><strong>To:</strong> closed</li>
</ul>
</blockquote>
</li>
<li class='comment' id='comment_12561'>
<cite>
anonymous
<span class='when'><a href="#comment_12561"><time data-relative="true">2014-07-04T10:32:29Z</time></a></span>
</cite>
<blockquote><pre class="shell-syntax">$ ruby -v
ruby 2.0.0p353 (2013-11-22 revision 43784) [x86_64-darwin13.0.0]</pre>
<p>it aslo broken !</p>
</blockquote>
</li>

</ol>
<h5 class='major'>Add a comment</h5>
<p>Comments are now closed for this issue.</p>

</div>
</div>
<footer class='global'>
<ul>
<li><a title="Email me at greg@hurrell.net" class="mailto" href="mailto:greg@hurrell.net">contact</a></li>
<li><a href="/misc/legal">legal</a></li>
</ul>
</footer>
</div>
<div class='menu hide'>
<div class='menu-inner'>
<section>
<h2>Menu</h2>
<ul>
<li><a href="/blog">Blog</a></li>
<li><a href="/wiki">Wiki</a></li>
<li><a href="/issues">Issues</a></li>
<li><a href="/snippets">Snippets</a></li>
</ul>
</section>
</div>
</div>
</div>
<script src="/assets/application-70afe6376892ea318388e4bbb986d5a1.js"></script>

<script>
  new Wincent.Menu();
</script>
</body>
</html>
